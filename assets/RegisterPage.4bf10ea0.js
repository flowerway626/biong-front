import{r as d,I as h,j as $,k as Q,d as s,K as a,at as C,au as k,O as f,l as m,W as w,aA as q,P as B,J as L,S as x}from"./index.e2f377c7.js";import{Q as U}from"./QBtnToggle.bacdd93d.js";import{Q as c}from"./QCardSection.2335a465.js";import{Q as r}from"./QInput.fe67ba2a.js";import{Q as P}from"./QForm.8562d62c.js";import{Q as I}from"./QCard.3f9d0f50.js";import{Q as R}from"./QDialog.17f6cf01.js";import{C as S}from"./ClosePopup.3e5bad59.js";import{u as j}from"./use-quasar.23bb4798.js";import"./QBtnGroup.6355c374.js";import"./use-key-composition.5af287d2.js";import"./uid.42677368.js";const K={id:"register"},N={class:"row justify-between"},A={class:"col-5"},E={class:"col-5"},T={class:"text-center"},ee={__name:"RegisterPage",setup(_){const g=d(!0),n=d(!0),i=d(!0),p=d("register"),u=C(),v=j(),t=h({email:"",name:"",account:"",password:"",passwordConfirm:""}),y=()=>{u.push("/")},V=()=>{p.value==="login"?u.push("/login"):u.push("/register")},b=async()=>{var o,e;try{await L.post("/users/register",t),v.notify({type:"positive",color:"info",message:"\u8A3B\u518A\u6210\u529F",position:"top"}),await u.push("/login")}catch(l){x.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((e=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:e.message)||"\u8A3B\u518A\u932F\u8AA4\uFF01"})}};return(o,e)=>($(),Q("div",K,[s(R,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=l=>g.value=l),persistent:"","transition-show":"fade",onBeforeHide:y},{default:a(()=>[s(I,null,{default:a(()=>[k(s(f,{icon:"close",flat:"",round:"",style:{height:"24px","z-index":"7000",position:"absolute",right:"0"},to:"/"},null,512),[[S]]),s(c,{class:"flex justify-center"},{default:a(()=>[s(U,{class:"q-mt-md",style:{width:"85%"},spread:"","toggle-color":"white","toggle-text-color":"black",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),options:[{label:"LOGIN",value:"login"},{label:"REGISTER",value:"register"}],onClick:V},null,8,["modelValue"])]),_:1}),s(c,{class:"flex justify-center"},{default:a(()=>[s(P,{style:{width:"90%"},onSubmit:b},{default:a(()=>[s(r,{label:"email",modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=l=>t.email=l),rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.email("email \u683C\u5F0F\u932F\u8AA4")],color:"warning"},null,8,["modelValue","rules"]),m("div",N,[m("div",A,[s(r,{label:"name",modelValue:t.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.name=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])]),m("div",E,[s(r,{label:"account",modelValue:t.account,"onUpdate:modelValue":e[3]||(e[3]=l=>t.account=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])])]),s(r,{label:"password",modelValue:t.password,"onUpdate:modelValue":e[5]||(e[5]=l=>t.password=l),type:n.value?"password":"text",counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},{append:a(()=>[s(w,{class:"cursor-pointer",name:n.value?"visibility_off":"visibility",onClick:e[4]||(e[4]=l=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),s(r,{label:"passwordConfirm",modelValue:t.passwordConfirm,"onUpdate:modelValue":e[7]||(e[7]=l=>t.passwordConfirm=l),type:i.value?"password":"text",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.is(t.password,"\u5BC6\u78BC\u4E0D\u4E00\u81F4")],counter:"",maxlength:"20"},{append:a(()=>[s(w,{class:"cursor-pointer",name:i.value?"visibility_off":"visibility",onClick:e[6]||(e[6]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),m("div",T,[s(f,{class:"full-width q-my-lg",type:"submit",size:"md",push:"",color:"pink",onKeydown:q(o.login,["enter"])},{default:a(()=>[B("\u8A3B\u518A")]),_:1},8,["onKeydown"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{ee as default};
