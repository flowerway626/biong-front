import{ay as Y,r as h,H as F,bb as z,S as N,j as r,k as q,l as u,d as o,K as d,O as k,N as H,J as g,q as C,R as P,aT as ae,Q as se,F as I,P as W,U as J,ag as Z,bl as ee,az as ie,w as de,A as ne}from"./index.56a92387.js";import{Q as O}from"./QTd.fe564553.js";import{Q as x}from"./QInput.0cff7bd7.js";import{Q as le,a as L}from"./QTable.263909d9.js";import{Q as K}from"./QFile.37ac99e7.js";import{Q as M,a as E}from"./QCard.8c045a72.js";import{Q as R}from"./QCardActions.daa47bf8.js";import{Q as oe}from"./QForm.e03cbc1f.js";import{Q as G}from"./QDialog.de3b4cde.js";import{C as te}from"./ClosePopup.f3d94508.js";import{b as B,Q as re}from"./QSelect.e9f24bbb.js";import"./use-key-composition.17d467c7.js";const ue={class:"q-ma-md",id:"photo-setting"},me=["src"],ce={class:"text-h5 text-weight-bold"},pe={class:"flex"},fe={key:0,class:"absolute-full flex flex-center",style:{border:"2px solid #fff"}},ge={__name:"PhotoSetting",setup(X){const v=Y(),y=h(!1),c=h(!1),S=h(""),A=h(!1),p=h([]),V=h(""),U=F([]),_=F([]),t=F({idx:-1,_id:"",name:"",image:void 0,tags:[],images:[],delImages:[]}),Q=[{name:"image",required:!0,label:"\u5C01\u9762\u5716",field:"image"},{name:"date",required:!0,label:"\u4E0A\u50B3\u65E5\u671F",field:"date",format:w=>`${new Date(w).toLocaleString()}`,sortable:!0},{name:"name",required:!0,label:"\u6A19\u984C",field:"name"},{name:"other",label:"\u64CD\u4F5C"}],$=w=>{const n=_.findIndex(l=>l._id===w);console.log(n),n===-1?(t._id="",t.name="",t.image=void 0,t.images=[],t.delImages=[],t.tags=[],p.value=[],V.value="",U.splice(0,U.length),console.log(U)):(t._id=_[n]._id,t.idx=n,t.name=_[n].name,t.image=void 0,t.images=[],t.delImages=[],t.tags=_[n].tags,p.value=t.tags,V.value=_[n].image,U.splice(0,U.length),U.push(..._[n].images)),y.value=!0},a=async()=>{var n,l;y.value=!1,v.loading.show({spinner:ee,spinnerColor:"warning",spinnerSize:100,backgroundColor:"black",message:"loading...",messageColor:"white"}),t.tags=p.value;const w=new FormData;w.append("name",t.name),w.append("image",t.image);for(const i of t.images)w.append("images",i);for(const i of t.delImages)w.append("delImages",i);for(const i of t.tags)w.append("tags",i);try{if(t._id.length===0){const{data:i}=await z.post("/photos",w);_.push(i.result),v.notify({type:"positive",color:"pink",message:"\u65B0\u589E\u6210\u529F",position:"top"})}else{const{data:i}=await z.patch("/photos/"+t._id,w);_[t.idx]=i.result,console.log(t.tags),v.notify({type:"positive",color:"pink",message:"\u7DE8\u8F2F\u5B8C\u6210",position:"top"})}}catch(i){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((l=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:l.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}v.loading.hide()},T=async w=>{var l,i;const n=_.findIndex(f=>f._id===w);_.splice(n,1);try{c.value=!0,await z.delete("/photos/"+w),c.value=!1,v.notify({type:"positive",color:"pink",message:"\u5DF2\u522A\u9664\u6D3B\u52D5",position:"top"})}catch(f){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((i=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:i.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}};return(async()=>{var w,n;try{c.value=!0;const{data:l}=await z.get("/photos");_.push(...l.result),c.value=!1}catch(l){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((n=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:n.message)||"\u5546\u54C1\u932F\u8AA4\uFF01"})}})(),(w,n)=>(r(),q(I,null,[u("div",ue,[o(le,{class:"photo-table",rows:_,columns:Q,"row-key":"_id",filter:S.value,loading:c.value},{"body-cell-image":d(l=>[o(O,null,{default:d(()=>[u("img",{src:l.row.image,width:130,height:100,style:{"object-fit":"cover"}},null,8,me)]),_:2},1024)]),"top-left":d(()=>[o(k,{label:"\u65B0\u589E\u76F8\u7C3F",color:"secondary",outline:"",onClick:n[0]||(n[0]=l=>$(-1))})]),"top-right":d(()=>[o(x,{class:"q-mr-md",borderless:"",dense:"",debounce:"300",modelValue:S.value,"onUpdate:modelValue":n[1]||(n[1]=l=>S.value=l),placeholder:"Search"},{append:d(()=>[o(H,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-other":d(l=>[o(O,{class:"q-gutter-sm"},{default:d(()=>[A.value?C("",!0):(r(),g(k,{key:0,icon:"edit",round:"",unelevated:"",size:"sm",color:"pink",onClick:i=>$(l.row._id)},null,8,["onClick"])),A.value?(r(),g(k,{key:1,icon:"check",round:"",unelevated:"",size:"sm",color:"pink",onClick:n[2]||(n[2]=i=>A.value=!A.value)})):C("",!0),o(k,{icon:"delete",color:"pink",size:"sm",round:"",onClick:i=>T(l.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","filter","loading"])]),o(G,{id:"edit-photo",modelValue:y.value,"onUpdate:modelValue":n[11]||(n[11]=l=>y.value=l),persistent:"","transition-show":"fade","transition-hide":"fade"},{default:d(()=>[o(M,{class:"edit-photo-card text-white q-pa-sm"},{default:d(()=>[o(oe,{onSubmit:a},{default:d(()=>[o(E,{align:"center"},{default:d(()=>[u("div",ce,P(t._id.length>0?"\u7DE8\u8F2F\u76F8\u7C3F":"\u65B0\u589E\u76F8\u7C3F"),1),o(x,{modelValue:t.name,"onUpdate:modelValue":n[3]||(n[3]=l=>t.name=l),label:"\u6A19\u984C",type:"text",color:"warning",rules:[w.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"]),o(ae,{class:"q-my-sm shadow-1 overflow-hidden","default-opened":"",group:"ablum",style:{"border-radius":"16px"},icon:"album",label:"\u5C01\u9762","header-class":"bg-warning text-black text-weight-bold","expand-icon-class":"text-black"},{default:d(()=>[V.value!==""?(r(),g(se,{key:0,class:"q-ma-sm",src:V.value,width:"230px",height:"170px"},null,8,["src"])):C("",!0),o(K,{class:"q-ma-md",modelValue:t.image,"onUpdate:modelValue":n[4]||(n[4]=l=>t.image=l),label:"\u5C01\u9762\u5716",outlined:"","use-chips":"",style:{width:"230px"}},null,8,["modelValue"])]),_:1}),o(ae,{class:"q-my-sm shadow-1 overflow-hidden",group:"ablum",style:{"border-radius":"16px"},icon:"album",label:"\u76F8\u7247","header-class":"bg-warning text-black text-weight-bold","expand-icon-class":"text-black"},{default:d(()=>[u("div",pe,[t.idx>=0?(r(!0),q(I,{key:0},W(U,l=>(r(),q("div",{class:"q-ma-sm q-gutter-md",key:l},[o(se,{class:"fullwidth",src:l,width:"130px",height:"100px"},{default:d(()=>[t.delImages.includes(l)?(r(),q("div",fe,[o(H,{name:"delete",size:"md"})])):C("",!0),o(L,{class:"absolute-full flex flex-center",modelValue:t.delImages,"onUpdate:modelValue":n[5]||(n[5]=i=>t.delImages=i),val:l,style:{opacity:"0"}},null,8,["modelValue","val"])]),_:2},1032,["src"])]))),128)):C("",!0)]),o(K,{class:"q-ma-sm",modelValue:t.images,"onUpdate:modelValue":n[6]||(n[6]=l=>t.images=l),label:"photos",outlined:"","use-chips":"",multiple:"",style:{"max-width":"90%"}},null,8,["modelValue"])]),_:1}),o(L,{modelValue:p.value,"onUpdate:modelValue":n[7]||(n[7]=l=>p.value=l),label:"\u6CF3\u77E5",color:"warning",val:"youngji","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"]),o(L,{modelValue:p.value,"onUpdate:modelValue":n[8]||(n[8]=l=>p.value=l),label:"\u4FDE\u771F",color:"warning",val:"youjin","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"]),o(L,{modelValue:p.value,"onUpdate:modelValue":n[9]||(n[9]=l=>p.value=l),label:"mimi",color:"warning",val:"mimi","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"]),o(L,{modelValue:p.value,"onUpdate:modelValue":n[10]||(n[10]=l=>p.value=l),label:"\u6069\u667A",color:"warning",val:"eunji","checked-icon":"task_alt","unchecked-icon":"highlight_off"},null,8,["modelValue"])]),_:1}),o(R,{align:"center"},{default:d(()=>[o(k,{type:"submit",size:"md",color:"secondary"},{default:d(()=>[J("submit")]),_:1}),Z((r(),g(k,{size:"md",color:"pink"},{default:d(()=>[J("cancel")]),_:1})),[[te]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ve={class:"q-ma-md"},be=["src"],ye={key:1},ke={id:"edit-about"},we={class:"text-h5 q-ma-sm text-weight-bold"},_e={class:"row"},he={class:"col q-px-md"},xe={class:"row"},Ve={class:"col q-pr-md"},qe={class:"col-10"},$e=u("div",null,"\u8A73\u7D30\u8CC7\u8A0A",-1),Ce={class:"col q-px-md row"},Se=["src"],Ue={class:"row"},Ae={class:"col q-px-md"},ze={class:"row"},Qe={class:"col q-pr-md"},Ie={class:"col"},Be={class:"row"},Fe={class:"col-5 q-pr-md"},Ne=u("span",null,"\u958B\u59CB\u65E5\u671F",-1),De={class:"col-5 q-pr-md"},Ee=u("span",null,"\u7D50\u675F\u65E5\u671F",-1),Oe={class:"col"},Je={class:"q-mt-md"},Te=u("span",null,"\u56FA\u5B9A\u5609\u8CD3",-1),Le={class:"q-mt-md"},Pe=u("span",null,"\u88FD\u4F5C\u5C0E\u6F14",-1),Me={class:"q-mt-md"},Re=u("span",null,"\u4E32\u6D41\u5E73\u53F0",-1),Ge={class:"col"},je={class:"text-h6"},We=u("div",{class:"text-h6"},"\u8CC7\u6599\u9001\u51FA\u5F8C\u7121\u6CD5\u518D\u505A\u4FEE\u6539",-1),He={__name:"AboutSetting",setup(X){const v=Y(),y=F([]),c=h(!1),S=h(""),A=h(!1),p=h(!1),V=h(!1),U=h(!1),_=h(!1),t=h(""),Q=h(!1),$=F({}),a=F({idx:-1,_id:"",date:"",intro:"",session:"",info:{name:"",alias:{kor:"",eng:""},description:"",dateStart:"",dateEnd:"",Starring:[],director:[],episode:"",TWott:[]},image:void 0}),T=[{name:"session",required:!0,label:"\u5B63\u6578",field:m=>m.session,sortable:!0},{name:"date",required:!0,label:"\u7DE8\u8F2F\u65E5\u671F",field:m=>m.date,format:m=>`${new Date(m).toLocaleString()}`,sortable:!0},{name:"image",required:!0,label:"\u5716\u7247",field:m=>m.image},{name:"intro",required:!0,label:"\u7C21\u4ECB",field:m=>m.intro},{name:"info",required:!0,label:"\u8A73\u7D30\u8CC7\u8A0A",field:m=>m.info,sortable:!0},{name:"other",label:"\u64CD\u4F5C"}],w=(m,s)=>{U.value=!U.value,t.value="",$.title=m,$.key=s,$.data=a.info[s]},n=(m,s)=>{if(a._id.length>0){let e=y.find(b=>b._id===a._id).info[$.key];e=e?JSON.parse(JSON.stringify(e)):[],a.info[$.key].length===e.length&&(a.info[$.key]=e)}$.data=a.info[$.key],m.length>0?(U.value=!0,$.data.push(m),t.value=""):$.data.splice(s,1)},l=(m,s)=>{A.value=!0;const e=y.findIndex(b=>b._id===m);e===-1?(a._id="",a.date=new Date().toLocaleString(),a.intro="",a.session="",a.info={},a.image=void 0):(a._id=y[e]._id,a.idx=e,a.date=new Date(y[e].date).toLocaleString(),a.intro=y[e].intro,a.info=JSON.parse(JSON.stringify(y[e].info)),a.session=y[e].session,a.image=void 0),V.value=!0,p.value=s!=="view",Q.value=s,i(m)},i=m=>{const s=y.findIndex(e=>e._id===m);if(s===-1)a.info._id="",a.info.name="",a.info.alias={kor:"",eng:""},a.info.description="",a.info.dateStart="",a.info.dateEnd="",a.info.Starring=[],a.info.director=[],a.info.episode="",a.info.TWott=[];else{for(const e in a.info)e!=="idx"&&(a.info[e]=y[s].info[e]);a.info.idx=s}},f=async()=>{var s,e;A.value=!1,_.value=!1,v.loading.show({spinner:ee,spinnerColor:"warning",spinnerSize:100,backgroundColor:"black",message:"loading...",messageColor:"white"});const m=new FormData;a.info._id===""&&delete a.info._id,a.info=JSON.stringify(a.info);for(const b in a)m.append(b,a[b]);try{if(a._id.length===0){const{data:b}=await z.post("/abouts",m);y.push(b.result),v.notify({type:"positive",color:"pink",message:"\u65B0\u589E\u6210\u529F",position:"top"})}else{const{data:b}=await z.patch("/abouts/"+a._id,m);y[a.idx]=b.result,v.notify({type:"positive",color:"pink",message:"\u7DE8\u8F2F\u5B8C\u6210",position:"top"})}}catch(b){N.fire({toast:!0,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((e=(s=b==null?void 0:b.response)==null?void 0:s.data)==null?void 0:e.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}v.loading.hide()},D=async m=>{var s,e;try{c.value=!0;const b=y.findIndex(j=>j._id===m);await z.delete("/abouts/"+m),y.splice(b,1),c.value=!1,v.notify({type:"positive",color:"pink",message:"\u5DF2\u522A\u9664\u6D3B\u52D5",position:"top"})}catch(b){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((e=(s=b==null?void 0:b.response)==null?void 0:s.data)==null?void 0:e.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}};return(async()=>{var m,s;try{c.value=!0;const{data:e}=await z.get("/abouts");console.log("data.result :>> ",e.result),y.push(...e.result),c.value=!1}catch(e){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((s=(m=e==null?void 0:e.response)==null?void 0:m.data)==null?void 0:s.message)||"\u8CC7\u8A0A\u932F\u8AA4\uFF01"})}})(),(m,s)=>(r(),q(I,null,[u("div",ve,[o(le,{id:"about-table",rows:y,columns:T,"row-key":"_id",filter:S.value,loading:c.value},{"body-cell-image":d(e=>[o(O,null,{default:d(()=>[e.row.image?(r(),q("img",{key:0,src:e.row.image,width:100,height:100},null,8,be)):(r(),q("span",ye,"...NO IMAGE..."))]),_:2},1024)]),"top-left":d(()=>[o(k,{label:"\u65B0\u589E\u8CC7\u8A0A",color:"secondary",outline:"",onClick:s[0]||(s[0]=e=>l(-1))})]),"top-right":d(()=>[o(x,{class:"q-mr-md",borderless:"",dense:"",debounce:"300",modelValue:S.value,"onUpdate:modelValue":s[1]||(s[1]=e=>S.value=e),placeholder:"Search"},{append:d(()=>[o(H,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-info":d(e=>[o(O,{class:"q-gutter-sm"},{default:d(()=>[o(k,{icon:"add",round:"",unelevated:"",size:"sm",color:"pink",onClick:b=>l(e.row._id,"view")},null,8,["onClick"])]),_:2},1024)]),"body-cell-other":d(e=>[o(O,{class:"q-gutter-sm"},{default:d(()=>[o(k,{icon:"edit",round:"",unelevated:"",size:"sm",color:"pink",onClick:b=>l(e.row._id,"edit")},null,8,["onClick"]),o(k,{icon:"delete",color:"pink",size:"sm",round:"",onClick:b=>D(e.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","filter","loading"])]),u("div",ke,[o(G,{modelValue:A.value,"onUpdate:modelValue":s[19]||(s[19]=e=>A.value=e),persistent:"","transition-show":"fade","transition-hide":"fade"},{default:d(()=>[o(M,{class:"text-white"},{default:d(()=>[o(oe,null,{default:d(()=>[p.value?(r(),g(E,{key:0,align:"center"},{default:d(()=>[u("div",we,P(a._id.length>0?"\u7DE8\u8F2F\u8CC7\u8A0A":"\u65B0\u589E\u8CC7\u8A0A"),1),u("div",_e,[u("div",he,[u("div",xe,[u("div",Ve,[o(x,{class:"q-my-xs",modelValue:a.session,"onUpdate:modelValue":s[2]||(s[2]=e=>a.session=e),label:"\u5B63\u6578",type:"text",color:"warning",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])]),u("div",qe,[o(x,{class:"q-my-xs",modelValue:a.date,"onUpdate:modelValue":s[3]||(s[3]=e=>a.date=e),label:"\u6700\u5F8C\u7DE8\u8F2F\u65E5\u671F",type:"text",color:"warning",disable:""},null,8,["modelValue"])])]),o(x,{class:"row q-my-xs",modelValue:a.intro,"onUpdate:modelValue":s[4]||(s[4]=e=>a.intro=e),label:"\u7BC0\u76EE\u80CC\u666F",type:"textarea",color:"warning",autogrow:"",rows:"4",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"]),$e,V.value?(r(),g(k,{key:1,icon:"remove",round:"",unelevated:"",size:"sm",color:"pink",onClick:s[6]||(s[6]=e=>V.value=!V.value)})):(r(),g(k,{key:0,icon:"add",round:"",unelevated:"",size:"sm",color:"pink",onClick:s[5]||(s[5]=e=>V.value=!V.value)}))]),u("div",Ce,[y.find(e=>e._id===a._id)?(r(),q("img",{key:0,src:y.find(e=>e._id===a._id).image,width:300,height:450},null,8,Se)):C("",!0),o(K,{class:"q-my-xs",modelValue:a.image,"onUpdate:modelValue":s[7]||(s[7]=e=>a.image=e),outlined:"","use-chips":"",label:"\u914D\u5716"},null,8,["modelValue"])])])]),_:1})):C("",!0),V.value?(r(),g(E,{key:1},{default:d(()=>[u("div",Ue,[u("div",Ae,[o(x,{class:"q-my-xs",modelValue:a.info.name,"onUpdate:modelValue":s[8]||(s[8]=e=>a.info.name=e),label:"\u4E2D\u6587\u540D\u7A31",type:"text",color:"warning",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"]),u("div",ze,[u("div",Qe,[o(x,{class:"q-my-xs",modelValue:a.info.alias.kor,"onUpdate:modelValue":s[9]||(s[9]=e=>a.info.alias.kor=e),label:"\u97D3\u6587\u540D\u7A31",type:"text",color:"warning",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])]),u("div",Ie,[o(x,{class:"q-my-xs",modelValue:a.info.alias.eng,"onUpdate:modelValue":s[10]||(s[10]=e=>a.info.alias.eng=e),label:"\u82F1\u6587\u540D\u7A31",type:"text",color:"warning",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])])]),u("div",Be,[u("div",Fe,[Ne,o(x,{modelValue:a.info.dateStart,"onUpdate:modelValue":s[11]||(s[11]=e=>a.info.dateStart=e),filled:"",type:"date",color:"warning",borderless:""},null,8,["modelValue"])]),u("div",De,[Ee,o(x,{modelValue:a.info.dateEnd,"onUpdate:modelValue":s[12]||(s[12]=e=>a.info.dateEnd=e),filled:"",type:"date",color:"warning",borderless:""},null,8,["modelValue"])]),u("div",Oe,[o(x,{class:"q-my-xs",modelValue:a.info.episode,"onUpdate:modelValue":s[13]||(s[13]=e=>a.info.episode=e),label:"\u96C6\u6578",type:"text",color:"warning",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])])]),u("div",Je,[Te,u("div",null,[(r(!0),q(I,null,W(a.info.Starring,(e,b)=>(r(),q(I,{key:e},[a._id!==""&&Q.value==="view"?(r(),g(B,{key:0,label:e,clickable:"",outline:"",color:"warning","text-color":"white"},null,8,["label"])):(r(),g(B,{key:1,label:e,clickable:"",outline:"",removable:"",onRemove:j=>n("",b),color:"warning","text-color":"white"},null,8,["label","onRemove"]))],64))),128)),a._id===""||Q.value==="edit"?(r(),g(B,{key:0,clickable:"",outline:"",onClick:s[14]||(s[14]=e=>w("\u56FA\u5B9A\u5609\u8CD3","Starring")),color:"warning",icon:"add","text-color":"white"})):C("",!0)])]),u("div",Le,[Pe,u("div",null,[(r(!0),q(I,null,W(a.info.director,(e,b)=>(r(),q(I,{key:e},[a._id!==""&&Q.value==="view"?(r(),g(B,{key:0,label:e,clickable:"",outline:"",color:"warning","text-color":"white"},null,8,["label"])):(r(),g(B,{key:1,label:e,clickable:"",outline:"",removable:"",onRemove:j=>n("",b),color:"warning","text-color":"white"},null,8,["label","onRemove"]))],64))),128)),a._id===""||Q.value==="edit"?(r(),g(B,{key:0,clickable:"",outline:"",onClick:s[15]||(s[15]=e=>w("\u88FD\u4F5C\u5C0E\u6F14","director")),color:"warning",icon:"add","text-color":"white"})):C("",!0)])]),u("div",Me,[Re,u("div",null,[(r(!0),q(I,null,W(a.info.TWott,(e,b)=>(r(),q(I,{key:e},[a._id!==""&&Q.value==="view"?(r(),g(B,{key:0,label:e,clickable:"",outline:"",color:"warning","text-color":"white"},null,8,["label"])):(r(),g(B,{key:1,label:e,clickable:"",outline:"",removable:"",onRemove:j=>n("",b),color:"warning","text-color":"white"},null,8,["label","onRemove"]))],64))),128)),a._id===""||Q.value==="edit"?(r(),g(B,{key:0,clickable:"",outline:"",onClick:s[16]||(s[16]=e=>w("\u4E32\u6D41\u5E73\u53F0","TWott")),color:"warning",icon:"add","text-color":"white"})):C("",!0)])])]),u("div",Ge,[o(x,{class:"q-my-xs",modelValue:a.info.description,"onUpdate:modelValue":s[17]||(s[17]=e=>a.info.description=e),label:"\u8AAA\u660E",type:"textarea",color:"warning",autogrow:"",rules:[m.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])])])]),_:1})):C("",!0),o(R,{align:"center"},{default:d(()=>[p.value?(r(),g(k,{key:0,size:"md",color:"secondary",padding:"xs lg",onClick:s[18]||(s[18]=e=>_.value=!_.value)},{default:d(()=>[J("\u78BA\u5B9A")]),_:1})):C("",!0),Z((r(),g(k,{size:"md",color:"pink",padding:"xs lg"},{default:d(()=>[J("\u95DC\u9589")]),_:1})),[[te]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o(G,{modelValue:U.value,"onUpdate:modelValue":s[23]||(s[23]=e=>U.value=e)},{default:d(()=>[o(M,{style:{"min-width":"350px"}},{default:d(()=>[o(E,null,{default:d(()=>[u("div",je,"\u65B0\u589E "+P($.title),1)]),_:1}),o(E,{class:"q-pt-none"},{default:d(()=>[o(x,{dense:"",modelValue:t.value,"onUpdate:modelValue":s[20]||(s[20]=e=>t.value=e),color:"warning",autofocus:"",onKeyup:s[21]||(s[21]=ie(e=>U.value=!1,["enter"]))},null,8,["modelValue"]),u("span",null,P($.data),1)]),_:1}),o(R,{class:"text-primary",align:"center"},{default:d(()=>[o(k,{push:"",padding:"xs lg",label:"\u65B0\u589E",color:"warning",onClick:s[22]||(s[22]=e=>n(t.value,""))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(G,{modelValue:_.value,"onUpdate:modelValue":s[25]||(s[25]=e=>_.value=e)},{default:d(()=>[o(M,{style:{"min-width":"350px"},align:"center"},{default:d(()=>[o(E,null,{default:d(()=>[We]),_:1}),o(R,{class:"text-primary",align:"center"},{default:d(()=>[o(k,{push:"",padding:"xs lg",label:"\u78BA\u8A8D\u9001\u51FA",color:"warning",onClick:s[24]||(s[24]=e=>f())})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ke={class:"q-ma-md"},Xe={class:"row",style:{"min-width":"280px"}},Ye=["src"],Ze={key:1},el={class:"text-h5 q-ma-sm text-weight-bold"},ll={class:"row"},ol={class:"col q-px-md"},tl={class:"row"},al={class:"col q-pr-md"},sl={class:"col"},nl={class:"col q-px-md"},il=["src"],dl={__name:"MemberSetting",setup(X){const v=Y(),y=h(!1),c=h(!1),S=h(""),A=h(!1),p=F([]);let V=F([]),U=[];const _=h("All"),t=F({idx:-1,_id:"",session:"",name:"",features:"",story:"",IGlink:"",num:0,image:void 0}),Q=[{name:"session",required:!0,label:"\u5B63\u6578",field:"session"},{name:"image",required:!0,label:"\u5716\u7247"},{name:"name",required:!0,label:"\u59D3\u540D",field:"name"},{name:"features",required:!0,label:"\u7C21\u4ECB",field:"features"},{name:"story",required:!0,label:"\u8AAA\u660E",field:"story"},{name:"other",label:"\u64CD\u4F5C"}],$=n=>{y.value=!0,c.value=!0;const l=p.findIndex(i=>i._id===n);console.log("idx :>> ",l),l===-1?(t._id="",t.session="",t.name="",t.features="",t.story="",t.IGlink="",t.num=0,t.image=void 0):(t._id=p[l]._id,t.idx=l,t.session=p[l].session,t.name=p[l].name,t.features=p[l].features,t.story=p[l].story,t.IGlink=p[l].IGlink,t.num=p[l].num,t.image=void 0)},a=async()=>{var l,i;c.value=!0,v.loading.show({spinner:ee,spinnerColor:"warning",spinnerSize:100,backgroundColor:"black",message:"loading...",messageColor:"white"});const n=new FormData;for(const f in t)n.append(f,t[f]);try{if(t._id.length===0){const{data:f}=await z.post("/members",n);p.push(f.result),v.notify({type:"positive",color:"pink",message:"\u65B0\u589E\u6210\u529F",position:"top"})}else{const{data:f}=await z.patch("/members/"+t._id,n);console.log(f.result),p[t.idx]=f.result,v.notify({type:"positive",color:"pink",message:"\u7DE8\u8F2F\u5B8C\u6210",position:"top"})}}catch(f){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((i=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:i.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}w(_.value),c.value=!1,y.value=!1,v.loading.hide()},T=async n=>{var l,i;try{const f=p.findIndex(D=>D._id===n);c.value=!0,await z.delete("/members/"+n),c.value=!1,p.splice(f,1),v.notify({type:"positive",color:"pink",message:"\u5DF2\u522A\u9664\u6D3B\u52D5",position:"top"})}catch(f){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((i=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:i.message)||"\u767C\u751F\u932F\u8AA4\uFF01"})}},w=n=>{c.value=!0,V=JSON.parse(JSON.stringify(p)),V=n==="All"?V:V.filter(l=>l.session===n),c.value=!1};return(async()=>{var n,l;try{c.value=!0;const{data:i}=await z.get("/members");p.push(...i.result),p.sort((f,D)=>f.session!==D.session?f.session-D.session:f.num-D.num),V=JSON.parse(JSON.stringify(p)),U=["All",...new Set(p.map(f=>f.session))],c.value=!1}catch(i){N.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((l=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:l.message)||"\u53D6\u5F97\u6210\u54E1\u8CC7\u6599\u932F\u8AA4\uFF01"})}})(),de(_,n=>{w(n)}),(n,l)=>(r(),q(I,null,[u("div",Ke,[o(le,{class:"member-table",rows:ne(V),columns:Q,"row-key":"_id",filter:S.value,loading:c.value},{"top-left":d(()=>[u("div",Xe,[o(k,{class:"col-5 q-mr-md",label:"\u65B0\u589E\u6210\u54E1",color:"secondary",outline:"",onClick:l[0]||(l[0]=i=>$(-1))}),o(re,{class:"col",modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=i=>_.value=i),options:ne(U),dense:"",rounded:"",outlined:"",label:"\u9078\u64C7\u5B63\u6578",color:"secondary"},null,8,["modelValue","options"])])]),"top-right":d(()=>[o(x,{class:"q-mr-md",borderless:"",dense:"",modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=i=>S.value=i),placeholder:"Search"},{append:d(()=>[o(H,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-image":d(i=>[o(O,null,{default:d(()=>[i.row.image?(r(),q("img",{key:0,src:i.row.image,width:100,height:100},null,8,Ye)):(r(),q("span",Ze,"...NO IMAGE..."))]),_:2},1024)]),"body-cell-other":d(i=>[o(O,{class:"q-gutter-sm"},{default:d(()=>[A.value?C("",!0):(r(),g(k,{key:0,icon:"edit",round:"",unelevated:"",size:"sm",color:"pink",onClick:f=>$(i.row._id)},null,8,["onClick"])),A.value?(r(),g(k,{key:1,icon:"check",round:"",unelevated:"",size:"sm",color:"pink",onClick:l[3]||(l[3]=f=>A.value=!A.value)})):C("",!0),o(k,{icon:"delete",color:"pink",size:"sm",round:"",onClick:f=>T(i.row._id)},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows","filter","loading"])]),o(G,{modelValue:y.value,"onUpdate:modelValue":l[10]||(l[10]=i=>y.value=i),persistent:"","transition-show":"fade","transition-hide":"fade"},{default:d(()=>[o(M,{class:"text-white"},{default:d(()=>[o(oe,{onSubmit:a},{default:d(()=>[o(E,{align:"center"},{default:d(()=>[u("div",el,P(t._id.length>0?"\u7DE8\u8F2F\u6210\u54E1":"\u65B0\u589E\u6210\u54E1"),1),u("div",ll,[u("div",ol,[u("div",tl,[u("div",al,[o(x,{class:"q-my-xs",modelValue:t.session,"onUpdate:modelValue":l[4]||(l[4]=i=>t.session=i),label:"\u5B63\u6578",type:"text",color:"warning",rules:[n.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])]),u("div",sl,[o(x,{class:"q-my-xs",modelValue:t.num,"onUpdate:modelValue":l[5]||(l[5]=i=>t.num=i),label:"\u5E8F\u865F",type:"number",color:"warning",rules:[n.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])])]),o(x,{class:"q-my-xs",modelValue:t.name,"onUpdate:modelValue":l[6]||(l[6]=i=>t.name=i),label:"\u59D3\u540D",type:"text",color:"warning",rules:[n.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"]),o(x,{class:"q-my-xs",modelValue:t.features,"onUpdate:modelValue":l[7]||(l[7]=i=>t.features=i),label:"\u7C21\u4ECB",type:"text",color:"warning",rules:[n.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","rules"])]),u("div",nl,[p.find(i=>i._id===t._id)?(r(),q("img",{key:0,src:p.find(i=>i._id===t._id).image,width:150},null,8,il)):C("",!0),o(K,{class:"q-my-xs",modelValue:t.image,"onUpdate:modelValue":l[8]||(l[8]=i=>t.image=i),outlined:"","use-chips":"",label:"\u914D\u5716"},null,8,["modelValue"])])]),o(x,{class:"row q-my-xs q-px-md",modelValue:t.story,"onUpdate:modelValue":l[9]||(l[9]=i=>t.story=i),innerHTML:t.story,label:"\u8A73\u7D30\u8AAA\u660E",type:"textarea",color:"warning",autogrow:"",rows:"4",rules:[n.$rules.required("\u6B04\u4F4D\u5FC5\u586B")]},null,8,["modelValue","innerHTML","rules"]),o(R,{align:"center"},{default:d(()=>[o(k,{type:"submit",size:"md",color:"secondary",padding:"xs lg"},{default:d(()=>[J("\u78BA\u5B9A")]),_:1}),Z((r(),g(k,{size:"md",color:"pink",padding:"xs lg"},{default:d(()=>[J("\u95DC\u9589")]),_:1})),[[te]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},rl={class:"q-ma-md text-center"},ul={class:"q-gutter-md q-mb-md"},xl={__name:"AboutPage",setup(X){const v=h("abouts");return(y,c)=>(r(),q("div",rl,[u("div",ul,[v.value==="abouts"?(r(),g(k,{key:0,label:"\u7BC0\u76EE\u8CC7\u8A0A",color:"secondary",size:"15px",push:"",onClick:c[0]||(c[0]=S=>v.value="abouts")})):(r(),g(k,{key:1,label:"\u7BC0\u76EE\u8CC7\u8A0A",color:"secondary",size:"15px",outline:"",onClick:c[1]||(c[1]=S=>v.value="abouts")})),v.value==="members"?(r(),g(k,{key:2,label:"\u6210\u54E1\u4ECB\u7D39",color:"pink",size:"15px",push:"",onClick:c[2]||(c[2]=S=>v.value="members")})):(r(),g(k,{key:3,label:"\u6210\u54E1\u4ECB\u7D39",color:"pink",size:"15px",outline:"",onClick:c[3]||(c[3]=S=>v.value="members")})),v.value==="photos"?(r(),g(k,{key:4,label:"\u76F8\u7C3F\u7BA1\u7406",color:"warning",size:"15px",push:"",onClick:c[4]||(c[4]=S=>v.value="photos")})):(r(),g(k,{key:5,label:"\u76F8\u7C3F\u7BA1\u7406",color:"warning",size:"15px",outline:"",onClick:c[5]||(c[5]=S=>v.value="photos")}))]),v.value==="abouts"?(r(),g(He,{key:0})):C("",!0),v.value==="photos"?(r(),g(ge,{key:1})):C("",!0),v.value==="members"?(r(),g(dl,{key:2})):C("",!0)]))}};export{xl as default};
