import{r as d,I as h,j as Q,k as $,d as s,L as t,M as C,af as k,Q as f,l as m,a9 as w,ax as L,P as q,J as x,S as B}from"./index.11c40bb4.js";import{Q as U}from"./QBtnToggle.dad7e767.js";import{Q as c}from"./QCardSection.51821f00.js";import{Q as r}from"./QInput.2a13d0d6.js";import{Q as P}from"./QForm.7f39917f.js";import{Q as I}from"./QCard.24c81a4d.js";import{Q as R}from"./QDialog.9c2c6af2.js";import{C as S}from"./ClosePopup.76f64435.js";import{u as j}from"./use-quasar.ef81b6f5.js";import"./QBtnGroup.040fda00.js";import"./uid.42677368.js";const N={id:"register"},E={class:"row justify-between"},K={class:"col-5"},T={class:"col-5"},_={class:"text-center"},Z={__name:"RegisterPage",setup(z){const g=d(!0),n=d(!0),i=d(!0),p=d("register"),u=C(),v=j(),a=h({email:"",name:"",account:"",password:"",passwordConfirm:""}),y=()=>{u.push("/")},V=()=>{p.value==="login"?u.push("/login"):u.push("/register")},b=async()=>{var o,e;try{await x.post("/users/register",a),v.notify({type:"positive",color:"info",message:"\u8A3B\u518A\u6210\u529F",position:"top"}),await u.push("/login")}catch(l){B.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((e=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:e.message)||"\u8A3B\u518A\u932F\u8AA4\uFF01"})}};return(o,e)=>(Q(),$("div",N,[s(R,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=l=>g.value=l),persistent:"","transition-show":"fade",onBeforeHide:y},{default:t(()=>[s(I,null,{default:t(()=>[k(s(f,{icon:"close",flat:"",round:"",style:{height:"24px","z-index":"7000",position:"absolute",right:"0"},to:"/"},null,512),[[S]]),s(c,{class:"flex justify-center"},{default:t(()=>[s(U,{class:"q-mt-md",style:{width:"85%"},spread:"","toggle-color":"white","toggle-text-color":"black",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),options:[{label:"LOGIN",value:"login"},{label:"REGISTER",value:"register"}],onClick:V},null,8,["modelValue"])]),_:1}),s(c,{class:"flex justify-center"},{default:t(()=>[s(P,{style:{width:"90%"},onSubmit:b},{default:t(()=>[s(r,{label:"email",modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=l=>a.email=l),rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.email("email \u683C\u5F0F\u932F\u8AA4")],color:"warning"},null,8,["modelValue","rules"]),m("div",E,[m("div",K,[s(r,{label:"name",modelValue:a.name,"onUpdate:modelValue":e[2]||(e[2]=l=>a.name=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])]),m("div",T,[s(r,{label:"account",modelValue:a.account,"onUpdate:modelValue":e[3]||(e[3]=l=>a.account=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])])]),s(r,{label:"password",modelValue:a.password,"onUpdate:modelValue":e[5]||(e[5]=l=>a.password=l),type:n.value?"password":"text",counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},{append:t(()=>[s(w,{class:"cursor-pointer",name:n.value?"visibility_off":"visibility",onClick:e[4]||(e[4]=l=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),s(r,{label:"passwordConfirm",modelValue:a.passwordConfirm,"onUpdate:modelValue":e[7]||(e[7]=l=>a.passwordConfirm=l),type:i.value?"password":"text",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.is(a.password,"\u5BC6\u78BC\u4E0D\u4E00\u81F4")],counter:"",maxlength:"20"},{append:t(()=>[s(w,{class:"cursor-pointer",name:i.value?"visibility_off":"visibility",onClick:e[6]||(e[6]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),m("div",_,[s(f,{class:"full-width q-my-lg",type:"submit",size:"md",push:"",color:"pink",onKeydown:L(o.login,["enter"])},{default:t(()=>[q("\u8A3B\u518A")]),_:1},8,["onKeydown"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Z as default};
