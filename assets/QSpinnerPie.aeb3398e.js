import{c as Y}from"./QTable.ac56d0ac.js";import{b as K,u as X,c as G,e as H,f as J,i as Z,d as ee,g as E}from"./QInput.99f6a870.js";import{r as O,c as d,g as Q,ad as te,a4 as R,ac as ne,h as s,B,a2 as ae,a8 as ie,bq as le,br as re,bs as ue}from"./index.21ecd052.js";function S(e,o,h,y){const r=[];return e.forEach(c=>{y(c)===!0?r.push(c):o.push({failedPropValidation:h,file:c})}),r}function T(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),R(e)}const se={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},oe=["rejected"];function ce({editable:e,dnd:o,getFileInput:h,addFilesToQueue:y}){const{props:r,emit:c,proxy:b}=Q(),F=O(null),z=d(()=>r.accept!==void 0?r.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),A=d(()=>parseInt(r.maxFiles,10)),N=d(()=>parseInt(r.maxTotalSize,10));function V(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&te(t);else{const v=h();v&&v!==t.target&&v.click(t)}}function P(t){e.value&&t&&y(null,t)}function D(t,v,x,C){let a=Array.from(v||t.target.files);const m=[],g=()=>{m.length>0&&c("rejected",m)};if(r.accept!==void 0&&z.value.indexOf("*/")===-1&&(a=S(a,m,"accept",i=>z.value.some(u=>i.type.toUpperCase().startsWith(u)||i.name.toUpperCase().endsWith(u))),a.length===0))return g();if(r.maxFileSize!==void 0){const i=parseInt(r.maxFileSize,10);if(a=S(a,m,"max-file-size",u=>u.size<=i),a.length===0)return g()}if(r.multiple!==!0&&a.length>0&&(a=[a[0]]),a.forEach(i=>{i.__key=i.webkitRelativePath+i.lastModified+i.name+i.size}),C===!0){const i=x.map(u=>u.__key);a=S(a,m,"duplicate",u=>i.includes(u.__key)===!1)}if(a.length===0)return g();if(r.maxTotalSize!==void 0){let i=C===!0?x.reduce((u,L)=>u+L.size,0):0;if(a=S(a,m,"max-total-size",u=>(i+=u.size,i<=N.value)),a.length===0)return g()}if(typeof r.filter=="function"){const i=r.filter(a);a=S(a,m,"filter",u=>i.includes(u))}if(r.maxFiles!==void 0){let i=C===!0?x.length:0;if(a=S(a,m,"max-files",()=>(i++,i<=A.value)),a.length===0)return g()}if(g(),a.length>0)return a}function k(t){T(t),o.value!==!0&&(o.value=!0)}function l(t){R(t),(t.relatedTarget!==null||ne.is.safari!==!0?t.relatedTarget!==F.value:document.elementsFromPoint(t.clientX,t.clientY).includes(F.value)===!1)===!0&&(o.value=!1)}function _(t){T(t);const v=t.dataTransfer.files;v.length>0&&y(null,v),o.value=!1}function I(t){if(o.value===!0)return s("div",{ref:F,class:`q-${t}__dnd absolute-full`,onDragenter:T,onDragover:T,onDragleave:l,onDrop:_})}return Object.assign(b,{pickFiles:V,addFiles:P}),{pickFiles:V,addFiles:P,onDragover:k,onDragleave:l,processFiles:D,getDndNode:I,maxFilesNumber:A,maxTotalSizeNumber:N}}var pe=B({name:"QFile",inheritAttrs:!1,props:{...K,...X,...se,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...G,...oe],setup(e,{slots:o,emit:h,attrs:y}){const{proxy:r}=Q(),c=H(),b=O(null),F=O(!1),z=J(e),{pickFiles:A,onDragover:N,onDragleave:V,processFiles:P,getDndNode:D}=ce({editable:c.editable,dnd:F,getFileInput:q,addFilesToQueue:M}),k=Z(e),l=d(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),_=d(()=>E(l.value)),I=d(()=>l.value.map(n=>n.name).join(", ")),t=d(()=>le(l.value.reduce((n,f)=>n+f.size,0))),v=d(()=>({totalSize:t.value,filesNumber:l.value.length,maxFiles:e.maxFiles})),x=d(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:z.value,...y,id:c.targetUid.value,disabled:c.editable.value!==!0})),C=d(()=>"q-file q-field--auto-height"+(F.value===!0?" q-file--dnd":"")),a=d(()=>e.multiple===!0&&e.append===!0);function m(n){const f=l.value.slice();f.splice(n,1),i(f)}function g(n){const f=l.value.findIndex(n);f>-1&&m(f)}function i(n){h("update:modelValue",e.multiple===!0?n:n[0])}function u(n){n.keyCode===13&&ie(n)}function L(n){(n.keyCode===13||n.keyCode===32)&&A(n)}function q(){return b.value}function M(n,f){const p=P(n,f,l.value,a.value),w=q();w!=null&&(w.value=""),p!==void 0&&((e.multiple===!0?e.modelValue&&p.every(W=>l.value.includes(W)):e.modelValue===p[0])||i(a.value===!0?l.value.concat(p):p))}function j(){return[s("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function U(){if(o.file!==void 0)return l.value.length===0?j():l.value.map((f,p)=>o.file({index:p,file:f,ref:this}));if(o.selected!==void 0)return l.value.length===0?j():o.selected({files:l.value,ref:this});if(e.useChips===!0)return l.value.length===0?j():l.value.map((f,p)=>s(Y,{key:"file-"+p,removable:c.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{m(p)}},()=>s("span",{class:"ellipsis",textContent:f.name})));const n=e.displayValue!==void 0?e.displayValue:I.value;return n.length>0?[s("div",{class:e.inputClass,style:e.inputStyle,textContent:n})]:j()}function $(){const n={ref:b,...x.value,...k.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:M};return e.multiple===!0&&(n.multiple=!0),s("input",n)}return Object.assign(c,{fieldClass:C,emitValue:i,hasValue:_,inputRef:b,innerValue:l,floatingLabel:d(()=>_.value===!0||E(e.displayValue)),computedCounter:d(()=>{if(e.counterLabel!==void 0)return e.counterLabel(v.value);const n=e.maxFiles;return`${l.value.length}${n!==void 0?" / "+n:""} (${t.value})`}),getControlChild:()=>D("file"),getControl:()=>{const n={ref:c.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return c.editable.value===!0&&Object.assign(n,{onDragover:N,onDragleave:V,onKeydown:u,onKeyup:L}),s("div",n,[$()].concat(U()))}}),Object.assign(r,{removeAtIndex:m,removeFile:g,getNativeElement:()=>b.value}),ae(r,"nativeEl",()=>b.value),ee(c)}});const fe=[s("path",{d:"M0 50A50 50 0 0 1 50 0L50 50L0 50",fill:"currentColor",opacity:"0.5"},[s("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"0.8s",repeatCount:"indefinite"})]),s("path",{d:"M50 0A50 50 0 0 1 100 50L50 50L50 0",fill:"currentColor",opacity:"0.5"},[s("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1.6s",repeatCount:"indefinite"})]),s("path",{d:"M100 50A50 50 0 0 1 50 100L50 50L100 50",fill:"currentColor",opacity:"0.5"},[s("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2.4s",repeatCount:"indefinite"})]),s("path",{d:"M50 100A50 50 0 0 1 0 50L50 50L50 100",fill:"currentColor",opacity:"0.5"},[s("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"3.2s",repeatCount:"indefinite"})])];var ge=B({name:"QSpinnerPie",props:re,setup(e){const{cSize:o,classes:h}=ue(e);return()=>s("svg",{class:h.value,width:o.value,height:o.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},fe)}});export{pe as Q,ge as a};
