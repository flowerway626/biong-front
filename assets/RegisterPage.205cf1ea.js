import{r as d,H as h,j as $,k as C,d as s,K as t,L as Q,ay as k,ag as L,O as f,l as m,N as w,az as q,U as B,I as U,S as x}from"./index.da890d7e.js";import{Q as I}from"./QBtnToggle.62ea33d3.js";import{Q as N,a as c}from"./QCard.2d482ebc.js";import{Q as r}from"./QInput.2261e79d.js";import{Q as P}from"./QForm.e7f16558.js";import{Q as R}from"./QDialog.4408ccd4.js";import{C as S}from"./ClosePopup.0b5890ae.js";import"./use-key-composition.fec2a88a.js";const j={id:"register"},K={class:"row justify-between"},z={class:"col-5"},E={class:"col-5"},T={class:"text-center"},W={__name:"RegisterPage",setup(_){const g=d(!0),n=d(!0),i=d(!0),p=d("register"),u=Q(),v=k(),a=h({email:"",name:"",account:"",password:"",passwordConfirm:""}),y=()=>{u.push("/")},V=()=>{p.value==="login"?u.push("/login"):u.push("/register")},b=async()=>{var o,e;try{await U.post("/users/register",a),v.notify({type:"positive",color:"info",message:"\u8A3B\u518A\u6210\u529F",position:"top"}),await u.push("/login")}catch(l){x.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((e=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:e.message)||"\u8A3B\u518A\u932F\u8AA4\uFF01"})}};return(o,e)=>($(),C("div",j,[s(R,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=l=>g.value=l),persistent:"","transition-show":"fade",onBeforeHide:y},{default:t(()=>[s(N,null,{default:t(()=>[L(s(f,{icon:"close",flat:"",round:"",style:{height:"24px","z-index":"7000",position:"absolute",right:"0"},to:"/"},null,512),[[S]]),s(c,{class:"flex justify-center"},{default:t(()=>[s(I,{class:"q-mt-md",style:{width:"85%"},spread:"","toggle-color":"white","toggle-text-color":"black",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),options:[{label:"LOGIN",value:"login"},{label:"REGISTER",value:"register"}],onClick:V},null,8,["modelValue"])]),_:1}),s(c,{class:"flex justify-center"},{default:t(()=>[s(P,{style:{width:"90%"},onSubmit:b},{default:t(()=>[s(r,{label:"email",modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=l=>a.email=l),rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.email("email \u683C\u5F0F\u932F\u8AA4")],color:"warning"},null,8,["modelValue","rules"]),m("div",K,[m("div",z,[s(r,{label:"name",modelValue:a.name,"onUpdate:modelValue":e[2]||(e[2]=l=>a.name=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])]),m("div",E,[s(r,{label:"account",modelValue:a.account,"onUpdate:modelValue":e[3]||(e[3]=l=>a.account=l),counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},null,8,["modelValue","rules"])])]),s(r,{label:"password",modelValue:a.password,"onUpdate:modelValue":e[5]||(e[5]=l=>a.password=l),type:n.value?"password":"text",counter:"",maxlength:"20",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.maxLength(20,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143"),o.$rules.minLength(4,"\u9577\u5EA6\u9700\u70BA 4~20 \u500B\u5B57\u5143")]},{append:t(()=>[s(w,{class:"cursor-pointer",name:n.value?"visibility_off":"visibility",onClick:e[4]||(e[4]=l=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),s(r,{label:"passwordConfirm",modelValue:a.passwordConfirm,"onUpdate:modelValue":e[7]||(e[7]=l=>a.passwordConfirm=l),type:i.value?"password":"text",color:"warning",rules:[o.$rules.required("\u6B04\u4F4D\u5FC5\u586B"),o.$rules.is(a.password,"\u5BC6\u78BC\u4E0D\u4E00\u81F4")],counter:"",maxlength:"20"},{append:t(()=>[s(w,{class:"cursor-pointer",name:i.value?"visibility_off":"visibility",onClick:e[6]||(e[6]=l=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),m("div",T,[s(f,{class:"full-width q-my-lg",type:"submit",size:"md",push:"",color:"pink",onKeydown:q(o.login,["enter"])},{default:t(()=>[B("\u8A3B\u518A")]),_:1},8,["onKeydown"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{W as default};
