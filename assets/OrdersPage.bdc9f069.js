import{H as f,r as g,b2 as b,S as h,j as d,k as c,d as s,K as o,l as p,N as q,F as v,P as w,R as m}from"./index.431554ff.js";import{Q as x}from"./QInput.dc9e7893.js";import{Q as y,a as k}from"./QTable.6357e19d.js";import"./use-key-composition.2542fc4c.js";import"./QSelect.fb3285c2.js";import"./QDialog.b6a0fce8.js";const Q={class:"q-ma-md"},B=p("div",{class:"backH4 text-h4 text-center"},"\u8A02\u55AE\u660E\u7D30",-1),P={class:"q-pl-xs text-left"},H={__name:"OrdersPage",setup(S){const n=f([]),i=g(""),_=[{name:"id",required:!0,label:"\u8A02\u55AE\u7DE8\u865F",align:"center",field:"_id"},{name:"name",required:!0,label:"\u8A02\u8CFC\u4EBA",align:"center",field:a=>a.u_id.name},{name:"date",required:!0,label:"\u8A02\u8CFC\u65E5\u671F",align:"center",field:"date",format:a=>`${new Date(a).toLocaleDateString()}`,sortable:!0},{name:"product",required:!0,label:"\u5546\u54C1",align:"center"},{name:"total",required:!0,label:"\u91D1\u984D",align:"center",field:"totalPrice"}];return(async()=>{var a,r;try{const{data:e}=await b.get("/orders/all");n.push(...e.result.map(t=>(t.totalPrice=t.products.reduce((l,u)=>l+u.p_id.price*u.quantity,0),t))),console.log(n)}catch(e){h.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.message)||"\u8A02\u55AE\u932F\u8AA4\uFF01"})}})(),(a,r)=>(d(),c("div",Q,[B,s(y,{class:"order-table q-ma-md",columns:_,rows:n,"row-key":"_id",filter:i.value,loading:a.loading},{"top-right":o(()=>[s(x,{class:"q-mr-md",borderless:"",dense:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),placeholder:"Search"},{append:o(()=>[s(q,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-product":o(e=>[s(k,null,{default:o(()=>[(d(!0),c(v,null,w(e.row.products,t=>{var l;return d(),c("ul",P,[p("li",null,m(t==null?void 0:t.quantity)+" x \xA0 \xA0 "+m((l=t.p_id)==null?void 0:l.name),1)])}),256))]),_:2},1024)]),_:1},8,["rows","filter","loading"])]))}};export{H as default};
