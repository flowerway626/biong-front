import{I as _,r as f,aU as g,S as b,j as i,k as d,d as l,L as s,a9 as h,F as q,N as w,l as y,O as c}from"./index.4d5ced3c.js";import{Q as v}from"./QInput.64db43b3.js";import{a as x,Q as k}from"./QTable.17e1ca0f.js";import"./uid.42677368.js";import"./QItemLabel.e50bf66e.js";import"./QDialog.c92d743b.js";const Q={class:"q-ma-md"},B={class:"q-pl-xs text-left"},L={__name:"OrdersPage",setup(I){const o=_([]),n=f(""),m=[{name:"id",required:!0,label:"\u8A02\u55AE\u7DE8\u865F",align:"center",field:"_id"},{name:"name",required:!0,label:"\u8A02\u8CFC\u4EBA",align:"center",field:e=>e.u_id.name},{name:"date",required:!0,label:"\u8A02\u8CFC\u65E5\u671F",align:"center",field:"date",format:e=>`${new Date(e).toLocaleDateString()}`,sortable:!0,sort:(e,t)=>parseInt(e,10)-parseInt(t,10)},{name:"product",required:!0,label:"\u5546\u54C1",align:"center",sortable:!0},{name:"total",required:!0,label:"\u91D1\u984D",align:"center",field:"totalPrice"}];return(async()=>{var e,t;try{const{data:a}=await g.get("/orders/all");o.push(...a.result.map(r=>(r.totalPrice=r.products.reduce((p,u)=>p+u.p_id.price*u.quantity,0),r))),console.log(o)}catch(a){b.fire({toast:!0,timer:1e3,showConfirmButton:!1,background:"#F5ABA5",icon:"error",color:"black",text:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||"\u8A02\u55AE\u932F\u8AA4\uFF01"})}})(),(e,t)=>(i(),d("div",Q,[l(x,{class:"order-table",title:"\u8A02\u55AE\u7BA1\u7406",columns:m,rows:o,"row-key":"_id",filter:n.value,loading:e.loading},{"top-right":s(()=>[l(v,{class:"q-mr-md",borderless:"",dense:"",debounce:"300",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value=a),placeholder:"Search"},{append:s(()=>[l(h,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-product":s(a=>[l(k,null,{default:s(()=>[(i(!0),d(q,null,w(a.row.products,r=>(i(),d("ul",B,[y("li",null,c(r.quantity)+" x \xA0 \xA0 "+c(r.p_id.name),1)]))),256))]),_:2},1024)]),_:1},8,["rows","filter","loading"])]))}};export{L as default};
